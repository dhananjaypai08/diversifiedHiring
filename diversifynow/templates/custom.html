{% extends 'partials/base.html' %}
{% load static %}
{% block content %}

<div class="container text-white" style="text-align:center;">
  {% if changed %}
  <div class="alert alert-success" role="alert">
    <strong>Wohoo!</strong> 
    Changes Done.
  </div>
  {% endif %}
    {% if import_form %}
    <form action="/custom/" class="mt-5" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="data" placeholder="Import Data" required>
        <button type="submit" class="btn btn-outline-success">Import</button>
    </form>
    {% endif %}
    {% if edit %}

    <div class="container text-white">

    <form action="/custom/" method="POST">
    {% csrf_token %}
    <button type="submit" class="btn btn-success btn-sm mt-3">Save</button>
    <input type="hidden" name="num_rows" value="{{ imported_data.id|length }}">
    <table class="mt-3" name="table">
        <tr>
          {% for col in imported_data.columns %}
            <td>
              <h6>{{col}}</h6>
            </td>
          {% endfor %}
        </tr>
          {% for index, row in imported_data.iterrows %}
            <tr>
                {% comment %} <input type="text" name="{{index}}" class="form-control" id="formGroupExampleInput2" placeholder="" value="{{row}}"> {% endcomment %}
              {% for cell in row %}
                <td>
                    <input type="text" name="data[{{index}}]" class="form-control" id="formGroupExampleInput2" placeholder="" value="{{cell}}">
                </td>
              {% endfor %}
            </tr>
          {% endfor %}
      </table>
      
    </form>

    </div>
    {% elif button %}
    <div class="container mt-3 text-white">
        <form action="/custom/" method="POST">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary btn-sm">Edit</button>
        </form>
        <table>
            <tr>
              {% for col in imported_data.columns %}
                <td>
                  <h6>{{col}}</h6>
                </td>
              {% endfor %}
            </tr>
              {% for index, row in imported_data.iterrows %}
                <tr>
                  {% for cell in row %}
                    <td>
                      {{cell}}
                    </td>
                  {% endfor %}
                </tr>
              {% endfor %}
          </table>
    </div>
    {% endif %}
</div>
{% endblock %}